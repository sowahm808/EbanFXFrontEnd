import{a as j}from"./chunk-ASPIQHTE.js";import{a as $}from"./chunk-H3UCXOXM.js";import{Aa as L,B as a,D as C,Da as N,E as g,Ea as R,F as S,G as b,H as I,I as T,Ia as H,J as r,K as o,M as E,N as x,O as c,P as l,Q as O,R as v,T as D,U as k,V as w,ba as P,ra as y,t as m,v as h,wa as V,x as p,xa as A,y as _,ya as F,za as M}from"./chunk-TNJDMAVS.js";import"./chunk-ULBIGD3G.js";import"./chunk-FEBVYFP7.js";import"./chunk-JM4337FT.js";import"./chunk-BVYU3FJT.js";import"./chunk-JDETYR3C.js";import"./chunk-7SKQ7KRS.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-REYR55MP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{f as u}from"./chunk-TJJGX4BS.js";var B=(i,d)=>d.timestamp,G=()=>[];function q(i,d){if(i&1&&(r(0,"ion-item")(1,"ion-label"),l(2),o()()),i&2){let e=d.$implicit,t=c(2);a(2),D("",e.status," \u2022 ",t.date(e.timestamp)," ",e.note||"","")}}function z(i,d){if(i&1){let e=E();r(0,"p"),l(1,"Status: "),r(2,"span",1),l(3),o()(),r(4,"p"),l(5),o(),r(6,"ion-button",2),x("click",function(){p(e);let n=c();return _(n.refresh())}),l(7,"Refresh"),o(),r(8,"ion-button",3),x("click",function(){p(e);let n=c();return _(n.cancel())}),l(9,"Cancel"),o(),r(10,"h3"),l(11,"Timeline"),o(),r(12,"ion-list"),I(13,q,3,3,"ion-item",null,B),o()}if(i&2){let e,t,n,f,s=c();a(3),O((e=s.order())==null?null:e.status),a(2),v("Settlement Tx: ",((t=s.order())==null?null:t.settlementTxHash)||"N/A",""),a(3),S("disabled",((n=s.order())==null?null:n.status)==="PROCESSING"||((n=s.order())==null?null:n.status)==="SENT"||((n=s.order())==null?null:n.status)==="COMPLETED"),a(5),T(((f=s.order())==null?null:f.timeline)||w(3,G))}}var Z=(()=>{class i{constructor(){this.route=m(P),this.api=m($),this.toastCtrl=m(H),this.order=C(null)}ngOnInit(){this.refresh()}refresh(){let e=this.route.snapshot.paramMap.get("id");this.api.getOrder(e).subscribe(t=>this.order.set(t))}cancel(){return u(this,null,function*(){let e=this.order();e&&this.api.cancelOrder(e.id).subscribe(()=>u(this,null,function*(){yield(yield this.toastCtrl.create({message:"Order cancelled.",duration:1500,color:"success"})).present(),this.refresh()}))})}date(e){return j(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=h({type:i,selectors:[["ng-component"]],standalone:!0,features:[k],decls:6,vars:1,consts:[[1,"ion-padding"],[1,"status-pill"],["fill","outline","expand","block",3,"click"],["expand","block","color","danger",3,"click","disabled"]],template:function(t,n){t&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),l(3,"Order Details"),o()()(),r(4,"ion-content",0),g(5,z,15,4),o()),t&2&&(a(5),b(5,n.order()?5:-1))},dependencies:[A,R,N,V,y,L,F,M],encapsulation:2})}}return i})();export{Z as OrderDetailPage};
