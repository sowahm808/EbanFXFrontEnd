import{e as M}from"./chunk-54QM4O3L.js";import{B as s,Da as k,E as d,Ea as R,F as g,G as u,Ha as G,Ia as B,J as e,Ja as D,K as t,L as c,N as h,P as n,U as v,da as b,ea as S,ga as l,ha as w,ia as C,ja as L,la as y,ma as E,na as _,oa as I,ra as N,t as r,v as f,wa as P,xa as T,ya as x,za as F}from"./chunk-TNJDMAVS.js";import"./chunk-ULBIGD3G.js";import"./chunk-FEBVYFP7.js";import"./chunk-JM4337FT.js";import"./chunk-BVYU3FJT.js";import"./chunk-JDETYR3C.js";import"./chunk-7SKQ7KRS.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-REYR55MP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{f as p}from"./chunk-TJJGX4BS.js";function q(i,V){i&1&&(e(0,"div",4),n(1,"Enter a valid email."),t())}function j(i,V){i&1&&(e(0,"div",4),n(1,"Password must be at least 6 chars."),t())}var X=(()=>{class i{constructor(){this.fb=r(_),this.authService=r(M),this.router=r(b),this.loadingCtrl=r(G),this.toastCtrl=r(B),this.form=this.fb.nonNullable.group({email:["",[l.required,l.email]],password:["",[l.required,l.minLength(6)]]})}submit(){return p(this,null,function*(){if(this.form.invalid)return;let m=yield this.loadingCtrl.create({message:"Signing in..."});yield m.present();try{let{email:a,password:o}=this.form.getRawValue();yield this.authService.login(a,o),yield this.router.navigateByUrl("/tabs/dashboard")}catch{yield(yield this.toastCtrl.create({message:"Login failed. Check credentials.",duration:2200,color:"danger"})).present()}finally{yield m.dismiss()}})}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275cmp=f({type:i,selectors:[["ng-component"]],standalone:!0,features:[v],decls:20,vars:3,consts:[[1,"ion-padding"],[3,"ngSubmit","formGroup"],["position","stacked"],["formControlName","email","type","email"],[1,"inline-error"],["formControlName","password","type","password"],["type","submit","expand","block",1,"ion-margin-top"],["fill","clear","routerLink","/auth/register"]],template:function(a,o){a&1&&(e(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n(3,"Login"),t()()(),e(4,"ion-content",0)(5,"form",1),h("ngSubmit",function(){return o.submit()}),e(6,"ion-item")(7,"ion-label",2),n(8,"Email"),t(),c(9,"ion-input",3),t(),d(10,q,2,0,"div",4),e(11,"ion-item")(12,"ion-label",2),n(13,"Password"),t(),c(14,"ion-input",5),t(),d(15,j,2,0,"div",4),e(16,"ion-button",6),n(17,"Login"),t()(),e(18,"ion-button",7),n(19,"Need an account? Register"),t()()),a&2&&(s(5),g("formGroup",o.form),s(5),u(10,o.form.controls.email.touched&&o.form.controls.email.invalid?10:-1),s(5),u(15,o.form.controls.password.touched&&o.form.controls.password.invalid?15:-1))},dependencies:[T,R,k,P,x,F,D,N,I,L,w,C,y,E,S],encapsulation:2})}}return i})();export{X as LoginPage};
